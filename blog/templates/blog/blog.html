{% extends "users/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
Feed
{% endblock title %}

{% block nav %}
{% include 'blog/nav_content.html' %}
{% endblock nav %}

{% block content %}
                        <div class="container px-5 mt-10">
                            {% include 'blog/back_button.html' %}
                            {% include 'blog/search.html' %}
                            <hr class="my-4" />
                            {% for post in posts %}
                                {% for tag in post.tag %}
                                    {% if tag == "Featured" %}
                            <div class="card mb-4">
                                <div class="card-body p-0">
                                    <div class="row g-0">
                                        <div class="col-lg-6 p-5">
                                            <a class="badge badge-marketing bg-primary-soft rounded-pill text-primary mb-3" href="{% url 'blog:post-detail' post.id %}">{{ post.get_tag_display }}</a>
                                            <a class="text-dark" href="{% url 'blog:post-detail' post.id %}"><h1>{{ post.title }}</h1></a>
                                            <p class="text-dark">{{ post.get_shorten_preview }}</p>
                                            <a class="text-arrow-icon small" href="{% url 'blog:post-detail' post.id %}">
                                                Read more
                                                <i data-feather="arrow-right"></i>
                                            </a>
                                        </div>
                                        <div class="col-lg-6 align-self-stretch bg-img-cover d-none d-lg-flex" style="background-image: url({{ post.featured_image.url }})"></div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                                {% endfor %}
                            {% endfor %}
                            <div class="d-flex align-items-center justify-content-between">
                                
                                <h2 class="my-4">
                                    {% if posts %}
                                <span class="text-gradient">Recent</span>
                                {% endif %}
                                </h2>
                                <!--<div>
                                    <a class="text-arrow-icon small" href="#!">
                                        View more
                                        <i data-feather="arrow-right"></i>
                                    </a>
                                </div>-->
                            </div>
                            <hr class="mb-4" />
                            <div class="row gx-5 py-5">
                                <div class="col-lg-7 col-xl-8">
                                    {% for post in posts %}
                                    <div class="d-flex">
                                        <div class="flex-grow-1">
                                            <a href="{% url 'blog:post-detail' post.id %}"><h5 class="mt-0">{{ post.title }}</h5></a>
                                            <p>{{ post.get_shorten_preview }}</p>
                                            <a class="text-arrow-icon small" href="{% url 'blog:post-detail' post.id %}">
                                                Read more
                                                <i data-feather="arrow-right"></i>
                                            </a>
                                        </div>
                                        <div class="flex-shrink-0 ms-4"><img class="align-self-start rounded shadow media-img" src="{{ post.featured_image.url }}" alt="..." /></div>
                                    </div>
                                    <hr class="my-4" />
                                    {% endfor %}
                                    {% if not posts %}
                                        <div class="d-flex">
                                        <div class="flex-grow-1">
                                            <p>No Posts Available</p>
                                            <a class="text-arrow-icon small" href="{% url 'blog:content' %}">
                                                View content
                                                <i data-feather="arrow-right"></i>
                                            </a>
                                        </div>
                                    
                                    </div>
                                    <hr class="my-4" />
                                    {% endif %}
                                    <nav aria-label="Page navigation example">
                                        <ul class="pagination pagination-blog justify-content-center">
                                            {% if is_paginated %}
                                                {% if page_obj.has_previous %}
                                                    <li class="page-item">
                                                        <a class="page-link text-dark" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous"><span aria-hidden="true" class="text-dark">«</span></a>
                                                    </li>
                                                {% endif %}
                                                {% for num in page_obj.paginator.page_range %}
                                                    {% if page_obj.number == num %}
                                                        <li class="page-item active"><a class="page-link bg-dark" href="?page={{ num }}">{{ num }}</a></li>
                                                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                                        <li class="page-item active"><a class="page-link bg-dark" href="?page={{ num }}">{{ num }}</a></li>
                                                    {% endif %}
                                                {% endfor %}
                                                {% if page_obj.has_next %}
                                                    <li class="page-item">
                                                        <a class="page-link text-dark" href="?page={{ page_obj.next_page_number }}" aria-label="Next"><span aria-hidden="true" class="text-dark">»</span></a>
                                                    </li>
                                                {% endif %}
                                            {% endif %}
                                        </ul>
                                    </nav>
                                </div>
                                <div class="col-lg-5 col-xl-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6>Categories</h6>
                                            <hr />
                                            {% if tags %}
                                                    {% for tag in tags %}
                                            <a href="{% url 'blog:posts-by-tag' tag %}" class="text-dark m-2">{{ tag }}</a>
                                            {% endfor %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-10">
                                <div class="card-body p-5">
                                    <div class="row gx-5 align-items-center">
                                        <div class="col-lg-6">
                                            <h4>Get the latest news</h4>
                                            <div data-aos="fade-up">
                                                    <div class="justify-content-center m-auto">
                                                        
                                                        <div class="icon-list-social">
                                                            <a class="icon-list-social-link" href="https://www.instagram.com/digitalstudio.dev/">
                                                                <i class="fab fa-instagram text-light"></i>
                                                            </a>
                                                            <a class="icon-list-social-link" href="https://www.facebook.com/digitalstudio.dev/">
                                                                <i class="fab fa-facebook text-light"></i>
                                                            </a>
                                                            <a class="icon-list-social-link" href="https://github.com/digitalstudiodev">
                                                                <i class="fab fa-github text-light"></i>
                                                            </a>
                                                            <a class="icon-list-social-link" href="https://www.linkedin.com/company/digitalstudio-dev/">
                                                                <i class="fab fa-linkedin text-light"></i>
                                                            </a>
                                                            <a class="icon-list-social-link" href="https://medium.com/digital-studio-stream">
                                                                <i class="fab fa-medium text-light"></i>
                                                            </a>
                                                            <a class="icon-list-social-link" href="https://www.youtube.com/channel/UCjFGpMrV6GVAYIXG_lbX45g">
                                                                <i class="fab fa-youtube text-light"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            <p class="lead text-gray-500 mb-0">Stay in the loop with the latest stories and breaking headlines!</p>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="input-group mb-2">
                                                <input class="form-control form-control-solid" type="text" placeholder="youremail@example.com" aria-label="Recipient's username" aria-describedby="button-addon2" />
                                                <button class="btn btn-primary" id="button-addon2" type="button">Sign up</button>
                                            </div>
                                            <div class="small text-gray-500">You can unsubscribe at any time.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

{% endblock content %}